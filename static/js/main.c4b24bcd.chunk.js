(this.webpackJsonpmusic=this.webpackJsonpmusic||[]).push([[0],{266:function(e,t,n){"use strict";(function(e){var a=n(14),i=n(16),c=n(297),s=function(){function t(n,i){var s=this;Object(a.a)(this,t),this.client_id=n,this.client_secret=i,this.authOptions={url:"https://accounts.spotify.com/api/token",headers:{Authorization:"Basic "+e.from(this.client_id+":"+this.client_secret).toString("base64")},form:{grant_type:"client_credentials"},json:!0},new Promise((function(e,t){c.post(s.authOptions,(function(n,a,i){n||200!==a.statusCode?t(n):e(i.access_token)}))})).then((function(e){return s.token=e}))}return Object(i.a)(t,[{key:"getAudioAnalysis",value:function(e){var t=this;return new Promise((function(n,a){var i={url:"https://api.spotify.com/v1/audio-features?ids=".concat(e.join(",")),headers:{Authorization:"Bearer "+t.token},json:!0};c.get(i,(function(e,t,a){n(a)}))}))}},{key:"getSearchResults",value:function(e){var t=this;return new Promise((function(n,a){var i={url:"https://api.spotify.com/v1/search?q=".concat(e,"&type=track&limit=5"),headers:{Authorization:"Bearer "+t.token},json:!0};c.get(i,(function(e,t,a){n(a)}))}))}}]),t}();t.a=s}).call(this,n(19).Buffer)},287:function(e,t,n){},312:function(e,t){},314:function(e,t){},323:function(e,t){},325:function(e,t){},350:function(e,t){},352:function(e,t){},353:function(e,t){},358:function(e,t){},360:function(e,t){},366:function(e,t){},368:function(e,t){},387:function(e,t){},399:function(e,t){},402:function(e,t){},428:function(e,t){},536:function(e,t,n){},537:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(58),s=n.n(c),r=(n(287),n(172)),o=n(585),u=n(103),l=n.n(u),j=n(166),d=n(15),b=n(593),h=n(575),f=n(586),x=n(580),p=n(587),m=n(584),O=n(590),v=n(591),g=n(592),y=n(581),k=n(589),w=n(570),C=n(2),_={item:{m:.5,p:1},box:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignContent:"center",flexWrap:"wrap",width:"80%",py:1,mx:"auto",textAlign:"center"},field:{fontWeight:"bold"}};function A(e){var t=Object(a.useState)(e.features||{}),n=Object(d.a)(t,2),i=n[0],c=n[1],s=["acousticness","energy","instrumentalness","liveness","speechiness","valence"];return Object(a.useEffect)((function(){return c(e.features),function(){c({})}}),[i,e.features]),i?Object(C.jsx)(w.a,{sx:_.box,children:Object.keys(i).filter((function(e){return s.includes(e)})).map((function(e){var t=i[e];return Object(C.jsx)(f.a,{sx:_.item,variant:"outlined",children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)("span",{style:_.field,children:(e||"").charAt(0).toUpperCase()+(e||"").slice(1)})," ",t.toFixed(2)]})},e)}))}):Object(C.jsx)(C.Fragment,{})}var S=n(588),B=n(265),F=n.n(B),W=n(577),T={button:{height:80,width:80,color:"rgba(255,255,255,.9)"},shadow:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:151,minHeight:151,background:"rgba(0,0,0,.3)",borderTopLeftRadius:5,borderBottomLeftRadius:5}};function P(e){var t=e.audio,n=Object(a.useState)(!1),i=Object(d.a)(n,2),c=i[0],s=i[1];return Object(C.jsx)(h.a,{sx:T.shadow,children:Object(C.jsx)(S.a,{"aria-label":"play/pause",onClick:function(){c?t.pause():t.play(),s(!c)},children:c?Object(C.jsx)(W.a,{sx:T.button}):Object(C.jsx)(F.a,{sx:T.button})})})}var L=n(270);function R(e){var t=e.features,n=["acousticness","energy","instrumentalness","liveness","speechiness","valence"],a={labels:Object.keys(t).filter((function(e){return n.includes(e)})),plugins:{legend:{display:!1}},datasets:[{label:"Audio Features",backgroundColor:"rgba(163, 23, 107, 0.2)",borderColor:"rgb(163, 23, 107)",pointBackgroundColor:"rgb(163, 23, 107)",data:Object.keys(t).filter((function(e){return n.includes(e)})).map((function(e){return t[e]}))}]};return Object(C.jsx)(w.a,{children:Object(C.jsx)(L.a,{data:a,options:{plugins:{legend:{display:!1}}}})})}var E={stack:{display:"flex",justifyContent:"center",textAlign:"center",flexWrap:"wrap"},labels:{fontWeight:"bold"},item:{m:.5,p:1}};function q(e){var t=e.attributes;return Object(C.jsx)(m.a,{container:!0,justifyContent:"center",my:1,children:Object(C.jsxs)(h.a,{direction:"row",spacing:2,sx:E.stack,justifyContent:"center",children:[Object(C.jsx)(f.a,{sx:E.item,variant:"outlined",children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)("span",{style:E.labels,children:"Key:"})," ",["C","C\u266f","D","D\u266f, E\u266d","E","F","F\u266f, G\u266d","G","G\u266f, A\u266d","A","A\u266f, B\u266d","B"][t.key]]})}),Object(C.jsx)(f.a,{sx:E.item,variant:"outlined",children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)("span",{style:E.labels,children:"Loudness:"})," ",t.loudness," DB"]})}),Object(C.jsx)(f.a,{sx:E.item,variant:"outlined",children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)("span",{style:E.labels,children:"Mode:"})," ",t.mode?"Major":"Minor"]})}),Object(C.jsx)(f.a,{sx:E.item,variant:"outlined",children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)("span",{style:E.labels,children:"Tempo:"})," ",t.tempo.toFixed(2)," BPM"]})}),Object(C.jsx)(f.a,{sx:E.item,variant:"outlined",children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)("span",{style:E.labels,children:"Time Signature:"})," ",t.time_signature]})})]})})}var I={modal:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:"800px",bgcolor:"background.paper",boxShadow:12,p:4,borderRadius:1,maxHeight:"80vh",overflowY:"auto"},close:{position:"absolute",left:10,top:3},track:{display:"flex",my:1,maxWidth:"600px",mx:"auto"},cover:{width:151,borderTopLeftRadius:5,borderBottomLeftRadius:5},header:{flex:"0 1 100%",m:1,fontWeight:"bold",textAlign:"center"}};function D(e){var t=e.track,n=e.audio,a=e.open,i=e.handleClose,c=t.preview_url||"";return Object(C.jsx)(y.a,{open:a,onClose:i,children:Object(C.jsxs)(h.a,{sx:I.modal,elevation:10,children:[Object(C.jsx)(k.a,{sx:I.close,onClick:i,children:"Close"}),Object(C.jsxs)(f.a,{sx:I.track,elevation:4,children:[c?Object(C.jsx)(P,{url:t.preview_url,audio:n}):"",Object(C.jsx)(h.a,{sx:I.cover,component:"img",src:t.album.images[0].url}),Object(C.jsxs)(h.a,{m:1,children:[Object(C.jsx)(p.a,{component:"div",variant:"h6",fontWeight:"bold",children:t.name}),Object(C.jsx)(p.a,{component:"div",variant:"subtitle1",children:t.artists[0].name})]})]}),Object(C.jsxs)(h.a,{justifyContent:"center",children:[Object(C.jsx)(p.a,{variant:"h6",sx:I.header,children:"Track Attributes"}),Object(C.jsx)(q,{attributes:t.audio_features})]}),Object(C.jsxs)(m.a,{container:!0,justifyContent:"center",children:[Object(C.jsx)(p.a,{variant:"h6",sx:I.header,children:"Calculated Features"}),Object(C.jsxs)(m.a,{container:!0,alignItems:"center",justifyContent:"center",children:[Object(C.jsx)(m.a,{item:!0,md:6,sm:8,xs:12,children:Object(C.jsx)(R,{features:t.audio_features})}),Object(C.jsx)(m.a,{item:!0,md:6,sm:4,xs:12,children:Object(C.jsx)(A,{features:t.audio_features})})]})]})]})})}function M(e){var t=e.track,n=Object(a.useState)(!1),i=Object(d.a)(n,2),c=i[0],s=i[1],r=new Audio(t.preview_url);return Object(C.jsxs)("div",{children:[Object(C.jsx)(O.a,{py:10,my:3,elevation:2,onClick:function(){return s(!0)},children:Object(C.jsxs)(h.a,{sx:{display:"flex"},children:[Object(C.jsx)(v.a,{component:"img",sx:{width:151},image:t.album.images[0].url}),Object(C.jsxs)(g.a,{children:[Object(C.jsx)(p.a,{component:"div",variant:"h6",sx:{fontWeight:"bold"},children:t.name}),Object(C.jsx)(p.a,{component:"div",variant:"subtitle1",children:t.artists[0].name})]})]})}),Object(C.jsx)(D,{audio:r,track:t,open:c,handleClose:function(){r.pause(),s(!1)}})]})}var z=n(266),G=n(23),H=n(267),J=new z.a("a2dc26de72a148c39c524070d4ef9dba","d1b5fc39be7b48d4bd6144c5304baba8"),K={welcome:{p:2,my:2}};function U(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(""),r=Object(d.a)(s,2),o=r[0],u=r[1],O=Object(G.f)();Object(a.useEffect)((function(){var t=Object(H.parse)(e.location.search);t.q&&t.q.trim().length&&u(t.q)}),[e.location.search]),Object(a.useEffect)((function(){o.trim().length?(J.getSearchResults(o).then(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tracks.items,e.next=3,new Promise((function(e){return setTimeout(e,150)}));case 3:J.getAudioAnalysis(t.tracks.items.map((function(e){return e.id}))).then((function(e){e.audio_features&&e.audio_features.forEach((function(e,t){return n[t].audio_features=e}))})).then((function(){c(n)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O.push({pathname:"/search",search:"q=".concat(o)})):(c([]),O.push({pathname:"/"}))}),[O,o]);var v=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)(b.a,{children:[Object(C.jsxs)(h.a,{my:2,elevation:5,children:[Object(C.jsx)(f.a,{my:1,elevation:2,children:Object(C.jsx)(x.a,{fullWidth:!0,placeholder:"Search Songs by Title or Artist",onChange:v})}),i.length?Object(C.jsx)(C.Fragment,{}):Object(C.jsxs)(f.a,{elevation:2,sx:K.welcome,children:[Object(C.jsx)(p.a,{variant:"h6",children:"Welcome to Regress it"}),Object(C.jsx)(p.a,{variant:"body1",children:"To look at a song's audio features just type a query into the search bar!"})]})]}),Object(C.jsx)(m.a,{container:!0,spacing:2,children:i?i.map((function(e){return Object(C.jsx)(m.a,{item:!0,xs:12,children:Object(C.jsx)(M,{track:e})},e.id)})):Object(C.jsx)(C.Fragment,{})})]})}var Y=n(594),N={thumbnail:{height:60,mx:"auto",my:1,cursor:"pointer"},bar:{background:"black",justifyContent:"center"}};function Q(){var e=Object(G.f)();return Object(C.jsx)(Y.a,{position:"relative",sx:N.bar,children:Object(C.jsx)(h.a,{component:"img",src:"./../../beatsLogo.png",sx:N.thumbnail,onClick:function(){e.push("/")}})})}var V={box:{display:"flex",justifyContent:"center",my:5,alignItems:"center"},icon:{height:30,m:1}};function X(){return Object(C.jsxs)(h.a,{sx:V.box,children:[Object(C.jsx)(h.a,{sx:V.icon,component:"img",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/Spotify_logo_without_text.svg/1024px-Spotify_logo_without_text.svg.png"}),Object(C.jsx)(p.a,{variant:"overline",children:"Powered by the Spotify API"})]})}n(536);var Z=n(269),$=Object(r.a)({palette:{primary:{main:"#a3176b"}}});var ee=function(){return Object(C.jsx)(o.a,{theme:$,children:Object(C.jsxs)(Z.a,{children:[Object(C.jsx)(Q,{}),Object(C.jsx)(G.c,{children:Object(C.jsx)(G.a,{path:"/",component:U})}),Object(C.jsx)(X,{})]})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,596)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))};s.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(ee,{})}),document.getElementById("root")),te()}},[[537,1,2]]]);
//# sourceMappingURL=main.c4b24bcd.chunk.js.map