(this.webpackJsonpmusic=this.webpackJsonpmusic||[]).push([[0],{267:function(e,t,n){"use strict";(function(e){var a=n(14),s=n(15),i=n(297),r=function(){function t(n,s){var r=this;Object(a.a)(this,t),this.client_id=n,this.client_secret=s,this.authOptions={url:"https://accounts.spotify.com/api/token",headers:{Authorization:"Basic "+e.from(this.client_id+":"+this.client_secret).toString("base64")},form:{grant_type:"client_credentials"},json:!0},new Promise((function(e,t){i.post(r.authOptions,(function(n,a,s){n||200!==a.statusCode?t(n):e(s.access_token)}))})).then((function(e){return r.token=e}))}return Object(s.a)(t,[{key:"getAudioAnalysis",value:function(e){var t=this;return new Promise((function(n,a){var s={url:"https://api.spotify.com/v1/audio-features?ids=".concat(e.join(",")),headers:{Authorization:"Bearer "+t.token},json:!0};i.get(s,(function(e,t,a){n(a)}))}))}},{key:"getSearchResults",value:function(e){var t=this;return new Promise((function(n,a){var s={url:"https://api.spotify.com/v1/search?q=".concat(e,"&type=track&limit=5"),headers:{Authorization:"Bearer "+t.token},json:!0};i.get(s,(function(e,t,a){n(a)}))}))}}]),t}();t.a=r}).call(this,n(19).Buffer)},287:function(e,t,n){},312:function(e,t){},314:function(e,t){},323:function(e,t){},325:function(e,t){},350:function(e,t){},352:function(e,t){},353:function(e,t){},358:function(e,t){},360:function(e,t){},366:function(e,t){},368:function(e,t){},387:function(e,t){},399:function(e,t){},402:function(e,t){},428:function(e,t){},536:function(e,t,n){},537:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(58),r=n.n(i),c=(n(287),n(173)),o=n(585),u=n(103),l=n.n(u),d=n(167),h=n(16),j=n(593),b=n(575),g=n(586),p=n(580),f=n(587),x=n(584),m=n(590),O=n(591),v=n(592),y=n(581),k=n(589),R=n(570),T=n(2),w={item:{m:.5,p:1},box:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignContent:"center",flexWrap:"wrap",width:"80%",py:1,mx:"auto",textAlign:"center"},field:{fontWeight:"bold"}};function C(e){var t=Object(a.useState)(e.features||{}),n=Object(h.a)(t,2),s=n[0],i=n[1],r=["acousticness","energy","instrumentalness","liveness","speechiness","valence"];return Object(a.useEffect)((function(){return i(e.features),function(){i({})}}),[s,e.features]),s?Object(T.jsx)(R.a,{sx:w.box,children:Object.keys(s).filter((function(e){return r.includes(e)})).map((function(e){var t=s[e];return Object(T.jsx)(g.a,{sx:w.item,variant:"outlined",children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("span",{style:w.field,children:(e||"").charAt(0).toUpperCase()+(e||"").slice(1)})," ",t.toFixed(2)]})},e)}))}):Object(T.jsx)(T.Fragment,{})}var _=n(588),F=n(266),B=n.n(F),H=n(577),A={button:{height:80,width:80,color:"rgba(255,255,255,.9)"},shadow:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:151,minHeight:151,background:"rgba(0,0,0,.3)",borderTopLeftRadius:5,borderBottomLeftRadius:5}};function P(e){var t=e.audio,n=Object(a.useState)(!1),s=Object(h.a)(n,2),i=s[0],r=s[1];return Object(T.jsx)(b.a,{sx:A.shadow,children:Object(T.jsx)(_.a,{"aria-label":"play/pause",onClick:function(){i?t.pause():t.play(),r(!i)},children:i?Object(T.jsx)(H.a,{sx:A.button}):Object(T.jsx)(B.a,{sx:A.button})})})}var S=n(121);function D(e){var t=e.features,n=["acousticness","energy","instrumentalness","liveness","speechiness","valence"],a={labels:Object.keys(t).filter((function(e){return n.includes(e)})),plugins:{legend:{display:!1}},datasets:[{label:"Audio Features",backgroundColor:"rgba(163, 23, 107, 0.2)",borderColor:"rgb(163, 23, 107)",pointBackgroundColor:"rgb(163, 23, 107)",data:Object.keys(t).filter((function(e){return n.includes(e)})).map((function(e){return t[e]}))}]};return Object(T.jsx)(R.a,{children:Object(T.jsx)(S.b,{data:a,options:{plugins:{legend:{display:!1}}}})})}var E={stack:{display:"flex",justifyContent:"center",textAlign:"center",flexWrap:"wrap"},labels:{fontWeight:"bold"},item:{m:.5,p:1}};function W(e){var t=e.attributes;return Object(T.jsx)(x.a,{container:!0,justifyContent:"center",my:1,children:Object(T.jsxs)(b.a,{direction:"row",spacing:2,sx:E.stack,justifyContent:"center",children:[Object(T.jsx)(g.a,{sx:E.item,variant:"outlined",children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("span",{style:E.labels,children:"Key:"})," ",["C","C\u266f","D","D\u266f, E\u266d","E","F","F\u266f, G\u266d","G","G\u266f, A\u266d","A","A\u266f, B\u266d","B"][t.key]]})}),Object(T.jsx)(g.a,{sx:E.item,variant:"outlined",children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("span",{style:E.labels,children:"Loudness:"})," ",t.loudness," DB"]})}),Object(T.jsx)(g.a,{sx:E.item,variant:"outlined",children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("span",{style:E.labels,children:"Mode:"})," ",t.mode?"Major":"Minor"]})}),Object(T.jsx)(g.a,{sx:E.item,variant:"outlined",children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("span",{style:E.labels,children:"Tempo:"})," ",t.tempo.toFixed(2)," BPM"]})}),Object(T.jsx)(g.a,{sx:E.item,variant:"outlined",children:Object(T.jsxs)(f.a,{children:[Object(T.jsx)("span",{style:E.labels,children:"Time Signature:"})," ",t.time_signature]})})]})})}var M=n(14),L=n(15),I=function(){function e(t){Object(M.a)(this,e),this.track=t,this.audioFeatures=t.audio_features,this.energy=this.audioFeatures.energy,this.speechiness=this.audioFeatures.speechiness,this.acousticness=this.audioFeatures.acousticness,this.instrumentalness=this.audioFeatures.instrumentalness,this.valence=this.audioFeatures.valence,this.liveness=this.audioFeatures.liveness,this.tempo=this.audioFeatures.tempo,this.timeSignature=this.audioFeatures.time_signature}return Object(L.a)(e,[{key:"getUndergroundRap",value:function(){return this.getResult(-.5246,-3.4369,-1.5796,.3625,2.896,-.5056)}},{key:"getTrapMetal",value:function(){return this.getResult(-26.57,0,0,0,0,0,0)}},{key:"getEmo",value:function(){return this.getResult(-4.4942,4.7351,-22.681,1.1804,-16.3683,-2.8841)}},{key:"getRap",value:function(){return this.getResult(.5778,-4.9464,-23.2264,.6007,2.7056,-.5847)}},{key:"getRnB",value:function(){return this.getResult(-1.3335,-3.2473,-10.2992,3.8159,-2.4231,-.5451)}},{key:"getTechHouse",value:function(){return this.getResult(-4.203,-1.6726,3.0743,5.6098,-5.4623,-10.2699)}},{key:"getTechno",value:function(){return this.getResult(-3.4271,-3.8642,7.7158,-3.0622,-1.4644,-.3909)}},{key:"getTrance",value:function(){return this.getResult(-6.1217,6.0564,.3212,-3.2517,-6.5198,-7.6091)}},{key:"getPsytrance",value:function(){return this.getResult(-7.0915,4.5514,3.4303,-1.073,-8.5854,-9.8933)}},{key:"getTrap",value:function(){return this.getResult(-9.0616,7.9757,-1.2353,-1.6852,4.7825,-6.2368)}},{key:"getDnb",value:function(){return this.getResult(-5.27,4.472,.3349,-2.4015,-3.3308,-2.654)}},{key:"getHardstyle",value:function(){return this.getResult(-7.18348,8.14339,-3.11819,-3.1847,-5.9997,.09608)}},{key:"getPop",value:function(){return this.getResult(-1.1396,-2.109,-5.1885,3.0067,-9.1623,1.0115)}},{key:"getHipHop",value:function(){return this.getResult(-3.7166,-1.5946,-4.26,3.2731,3.7643,1.9619)}},{key:"getDarkTrap",value:function(){return this.getResult(1.321,-3.9521,-2.9703,-3.1219,1.2064,.8022)}},{key:"getResult",value:function(e,t,n,a,s,i){var r=Math.exp(e+t*this.energy+n*this.speechiness+a*this.acousticness+s*this.instrumentalness+i*this.valence);return r=r>=1?0:r}}]),e}();function q(e){var t=e.track,n=new I(t),a=[n.getPop(),n.getTechno(),n.getHipHop(),n.getDarkTrap(),n.getUndergroundRap(),n.getTrapMetal(),n.getEmo(),n.getRap(),n.getRnB(),n.getTechHouse(),n.getTrance(),n.getPsytrance(),n.getTrap(),n.getRnB(),n.getHardstyle()];console.log("Pop:",t.name,n.getPop()),console.log("Techno:",t.name,n.getTechno()),console.log("Hiphop:",t.name,n.getHipHop()),console.log("Dark Trap:",t.name,n.getDarkTrap()),console.log("Underground Rap:",t.name,n.getUndergroundRap()),console.log("Trap Metal:",t.name,n.getTrapMetal()),console.log("Emo:",t.name,n.getEmo()),console.log("Rap:",t.name,n.getRap()),console.log("RnB:",t.name,n.getRnB()),console.log("Tech House:",t.name,n.getTechHouse()),console.log("Trance:",t.name,n.getTrance()),console.log("PsyTrance:",t.name,n.getPsytrance()),console.log("Trap:",t.name,n.getTrap()),console.log("Dnb:",t.name,n.getRnB()),console.log("Hardstyle:",t.name,n.getHardstyle()),console.log("\n");var s={labels:["Pop","Techno","HipHop","Dark Trap","Underground Rap","Trap Metal","Emo","Rap","RnB","Tech House","Trance","Psytrance","Trap","Dnb","Hardstyle"],plugins:{legend:{display:!1}},datasets:[{label:"Audio Features",backgroundColor:"rgba(163, 23, 107, 0.2)",borderColor:"rgb(163, 23, 107)",pointBackgroundColor:"rgb(163, 23, 107)",borderWidth:2,borderRadius:5,data:a}]};return Object(T.jsx)(R.a,{children:Object(T.jsx)(S.a,{data:s,options:{plugins:{legend:{display:!1}}}})})}var U={modal:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",maxWidth:"800px",bgcolor:"background.paper",boxShadow:12,p:4,borderRadius:1,maxHeight:"80vh",overflowY:"auto"},close:{position:"absolute",left:10,top:3},track:{display:"flex",my:1,maxWidth:"600px",mx:"auto"},cover:{width:151,borderTopLeftRadius:5,borderBottomLeftRadius:5},header:{flex:"0 1 100%",m:1,fontWeight:"bold",textAlign:"center"}};function G(e){var t=e.track,n=e.audio,a=e.open,s=e.handleClose,i=t.preview_url||"";return Object(T.jsx)(y.a,{open:a,onClose:s,children:Object(T.jsxs)(b.a,{sx:U.modal,elevation:10,children:[Object(T.jsx)(k.a,{sx:U.close,onClick:s,children:"Close"}),Object(T.jsxs)(g.a,{sx:U.track,elevation:4,children:[i?Object(T.jsx)(P,{url:t.preview_url,audio:n}):"",Object(T.jsx)(b.a,{sx:U.cover,component:"img",src:t.album.images[0].url}),Object(T.jsxs)(b.a,{m:1,children:[Object(T.jsx)(f.a,{component:"div",variant:"h6",fontWeight:"bold",children:t.name}),Object(T.jsx)(f.a,{component:"div",variant:"subtitle1",children:t.artists[0].name})]})]}),Object(T.jsxs)(b.a,{justifyContent:"center",children:[Object(T.jsx)(f.a,{variant:"h6",sx:U.header,children:"Track Attributes"}),Object(T.jsx)(W,{attributes:t.audio_features})]}),Object(T.jsxs)(x.a,{container:!0,justifyContent:"center",children:[Object(T.jsx)(f.a,{variant:"h6",sx:U.header,children:"Calculated Features"}),Object(T.jsxs)(x.a,{container:!0,alignItems:"center",justifyContent:"center",children:[Object(T.jsx)(x.a,{item:!0,md:4,sm:8,xs:12,children:Object(T.jsx)(D,{features:t.audio_features})}),Object(T.jsx)(x.a,{item:!0,md:6,sm:4,xs:12,children:Object(T.jsx)(C,{features:t.audio_features})})]})]}),Object(T.jsxs)(x.a,{container:!0,justifyContent:"center",children:[Object(T.jsx)(f.a,{variant:"h6",sx:U.header,children:"Genre Prediction"}),Object(T.jsx)(x.a,{container:!0,alignItems:"center",justifyContent:"center",children:Object(T.jsx)(x.a,{item:!0,md:9,sm:12,xs:12,children:Object(T.jsx)(q,{track:t})})})]})]})})}function z(e){var t=e.track,n=Object(a.useState)(!1),s=Object(h.a)(n,2),i=s[0],r=s[1],c=new Audio(t.preview_url);return Object(T.jsxs)("div",{children:[Object(T.jsx)(m.a,{py:10,my:3,elevation:2,onClick:function(){return r(!0)},children:Object(T.jsxs)(b.a,{sx:{display:"flex"},children:[Object(T.jsx)(O.a,{component:"img",sx:{width:151},image:t.album.images[0].url}),Object(T.jsxs)(v.a,{children:[Object(T.jsx)(f.a,{component:"div",variant:"h6",sx:{fontWeight:"bold"},children:t.name}),Object(T.jsx)(f.a,{component:"div",variant:"subtitle1",children:t.artists[0].name})]})]})}),Object(T.jsx)(G,{audio:c,track:t,open:i,handleClose:function(){c.pause(),r(!1)}})]})}var J=n(267),K=n(23),Y=n(268),N=new J.a("a2dc26de72a148c39c524070d4ef9dba","4a8759630b2f46a583bc113a6731253f"),Q={welcome:{p:2,my:2}};function V(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),s=n[0],i=n[1],r=Object(a.useState)(""),c=Object(h.a)(r,2),o=c[0],u=c[1],m=Object(K.f)();Object(a.useEffect)((function(){var t=Object(Y.parse)(e.location.search);t.q&&t.q.trim().length&&u(t.q)}),[e.location.search]),Object(a.useEffect)((function(){o.trim().length?(N.getSearchResults(o).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tracks.items,e.next=3,new Promise((function(e){return setTimeout(e,150)}));case 3:N.getAudioAnalysis(t.tracks.items.map((function(e){return e.id}))).then((function(e){e.audio_features&&e.audio_features.forEach((function(e,t){return n[t].audio_features=e}))})).then((function(){i(n)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m.push({pathname:"/",search:"q=".concat(o)})):(i([]),m.push({pathname:"/"}))}),[m,o]);var O=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(j.a,{children:[Object(T.jsxs)(b.a,{my:2,elevation:5,children:[Object(T.jsx)(g.a,{my:1,elevation:2,children:Object(T.jsx)(p.a,{fullWidth:!0,placeholder:"Search Songs by Title or Artist",onChange:O})}),s.length?Object(T.jsx)(T.Fragment,{}):Object(T.jsxs)(g.a,{elevation:2,sx:Q.welcome,children:[Object(T.jsx)(f.a,{variant:"h6",children:"Welcome to Regress it"}),Object(T.jsx)(f.a,{variant:"body1",children:"To look at a song's audio features just type a query into the search bar!"})]})]}),Object(T.jsx)(x.a,{container:!0,spacing:2,children:s?s.map((function(e){return Object(T.jsx)(x.a,{item:!0,xs:12,children:Object(T.jsx)(z,{track:e})},e.id)})):Object(T.jsx)(T.Fragment,{})})]})}var X=n(594),Z={thumbnail:{height:60,mx:"auto",my:1,cursor:"pointer"},bar:{background:"black",justifyContent:"center"}};function $(){var e=Object(K.f)();return Object(T.jsx)(X.a,{position:"relative",sx:Z.bar,children:Object(T.jsx)(b.a,{component:"img",src:"./../../beatsLogo.png",sx:Z.thumbnail,onClick:function(){e.push("/")}})})}var ee={box:{display:"flex",justifyContent:"center",my:5,alignItems:"center"},icon:{height:30,m:1}};function te(){return Object(T.jsxs)(b.a,{sx:ee.box,children:[Object(T.jsx)(b.a,{sx:ee.icon,component:"img",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/Spotify_logo_without_text.svg/1024px-Spotify_logo_without_text.svg.png"}),Object(T.jsx)(f.a,{variant:"overline",children:"Powered by the Spotify API"})]})}n(536);var ne=n(270),ae=Object(c.a)({palette:{primary:{main:"#a3176b"}}});var se=function(){return Object(T.jsx)(o.a,{theme:ae,children:Object(T.jsxs)(ne.a,{children:[Object(T.jsx)($,{}),Object(T.jsx)(K.c,{children:Object(T.jsx)(K.a,{path:"/",component:V})}),Object(T.jsx)(te,{})]})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,596)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};r.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(se,{})}),document.getElementById("root")),ie()}},[[537,1,2]]]);
//# sourceMappingURL=main.3241d1c5.chunk.js.map